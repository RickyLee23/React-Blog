{"ast":null,"code":"import _slicedToArray from\"/Users/lihongshen/Downloads/2022 \\u7528\\u9762\\u8A66\\u8CC7\\u6599/React-Blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/lihongshen/Downloads/2022 \\u7528\\u9762\\u8A66\\u8CC7\\u6599/React-Blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function _templateObject8(){var data=_taggedTemplateLiteral([\"\\n  margin-top: 20px;\\n  height:100px;\\n  width:100%;\\n  overflow: hidden;\\n  white-space: nowrap; \\n  text-overflow: ellipsis;\\n  word-break: break-all;\\n\"]);_templateObject8=function _templateObject8(){return data;};return data;}function _templateObject7(){var data=_taggedTemplateLiteral([\"\\n  margin-top: 50px;\\n  @media (max-width: 460px){\\n    margin: 10px 10px;\\n  }\\n\"]);_templateObject7=function _templateObject7(){return data;};return data;}function _templateObject6(){var data=_taggedTemplateLiteral([\"\\n  border: 0;\\n  background: none;\\n  cursor: pointer;\\n  padding: 5px;\\n  margin: 10px;\\n  font-size: 11px;\\n  color: #aaaaaa;\\n  text-transform: uppercase;\\n  letter-spacing: 3px;\\n  :hover {\\n    color:black;\\n  }\\n\"]);_templateObject6=function _templateObject6(){return data;};return data;}function _templateObject5(){var data=_taggedTemplateLiteral([\"\\n  @media (max-width: 460px){\\n    display: block;\\n    margin: 10px 10px;\\n  }\\n  margin: 20px 20px;\\n  display: inline-block;\\n  padding: 10px;\\n  color:#aaaaaa;\\n\"]);_templateObject5=function _templateObject5(){return data;};return data;}function _templateObject4(){var data=_taggedTemplateLiteral([\"\\n  color: rgba(0, 0, 0, 0.5);\\n  margin-bottom:50px;\\n  text-align: left;\\n\"]);_templateObject4=function _templateObject4(){return data;};return data;}function _templateObject3(){var data=_taggedTemplateLiteral([\"\\n  font-size: 36px;\\n  text-decoration: none;\\n  color: black;\\n  text-decoration: underline;\\n  :hover { text-decoration-color: #f4bf2c; }\\n  text-align: left;\\n\"]);_templateObject3=function _templateObject3(){return data;};return data;}function _templateObject2(){var data=_taggedTemplateLiteral([\"\\n  padding: 16px;\\n  display: flex;\\n  justify-content: space-between;\\n  margin: 10px auto;\\n  border-radius: 10px;\\n  margin-bottom: 20px;\\n  width: 50%;\\n\"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  text-align: center;\\n  text-decoration: none;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React,{useState,useEffect}from\"react\";import{getPosts}from\"../../WebAPI\";import styled from\"styled-components\";import{Link}from\"react-router-dom\";import\"./HomePage.scss\";import{useDispatch,useSelector}from\"react-redux\";import{selectLoader,toggleOpen,toggleOff}from\"../../redux/loaderSlice\";var Root=styled.div(_templateObject());var PostContainer=styled.div(_templateObject2());var PostTitle=styled(Link)(_templateObject3());var PostDate=styled.div(_templateObject4());var PageSign=styled.div(_templateObject5());var Button=styled.span(_templateObject6());var PageFunction=styled.div(_templateObject7());// const PostThumbnail = styled.div`\n//   width:60%;\n//   border:2px solid red;\n//   height:80vh;\n// `\nvar PostContent=styled.div(_templateObject8());function SelfIntroduceBlock(){return/*#__PURE__*/_jsx(\"div\",{className:\"simpleIntroduce__container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"simpleIntroduce__textContainer\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"simpleIntroduce__content\",children:\"A personal blog\"}),/*#__PURE__*/_jsxs(\"h1\",{className:\"simpleIntroduce__content-major\",children:[\"Ri\",/*#__PURE__*/_jsx(\"span\",{className:\"simpleIntroduce__content-sub\",children:\"ck\"}),\"y's\"]}),/*#__PURE__*/_jsx(\"h3\",{className:\"simpleIntroduce__text\",children:\"I am a frontend developer Based in Taipei\"})]})});}function Post(_ref){var post=_ref.post;var months=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];var editTime=new Date(post.createdAt);return/*#__PURE__*/_jsx(PostContainer,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"post__desc\",children:[/*#__PURE__*/_jsxs(PostDate,{children:[months[editTime.getMonth()],\". \",editTime.getDate(),\", \",editTime.getFullYear()]}),/*#__PURE__*/_jsx(PostTitle,{to:\"/post/\".concat(post.id),children:post.title}),/*#__PURE__*/_jsx(PostContent,{children:post.body})]})});}export default function HomePage(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),totalPage=_useState4[0],setTotalPage=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),page=_useState6[0],setPage=_useState6[1];var itemPerPage=5;var dispatch=useDispatch();var handleLoader=useSelector(selectLoader);useEffect(function(){getPosts(page,itemPerPage).then(function(post){return setTotalPage(Math.ceil(post.headers.get(\"X-Total-Count\")/itemPerPage));});dispatch(toggleOpen());getPosts(page,itemPerPage).then(function(res){return res.json();}).then(function(posts){dispatch(toggleOff());setPosts(posts);});},[page]);var handleFirstPage=function handleFirstPage(){pageChanged(1,itemPerPage);};var handleLastPage=function handleLastPage(){pageChanged(totalPage,itemPerPage);};var handlePreviousPage=function handlePreviousPage(){if(page!==1){pageChanged(page-1,itemPerPage);}};var handleNextPage=function handleNextPage(){if(page!==totalPage){pageChanged(page+1,itemPerPage);}};function pageChanged(newSet,itemPerPage){if(handleLoader){return;}setPage(newSet);dispatch(toggleOpen());getPosts(newSet,itemPerPage).then(function(res){return res.json();}).then(function(posts){dispatch(toggleOff());setPosts(posts);});}return/*#__PURE__*/_jsxs(Root,{children:[/*#__PURE__*/_jsx(SelfIntroduceBlock,{}),posts.map(function(post){return/*#__PURE__*/_jsx(Post,{post:post},post.id);}),/*#__PURE__*/_jsxs(PageFunction,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleFirstPage,children:\"First\"}),/*#__PURE__*/_jsx(Button,{onClick:handlePreviousPage,children:\"Previous\"}),/*#__PURE__*/_jsxs(PageSign,{children:[page,\" / \",totalPage]}),/*#__PURE__*/_jsx(Button,{onClick:handleNextPage,children:\"Next\"}),/*#__PURE__*/_jsx(Button,{onClick:handleLastPage,children:\"Last\"})]})]});}","map":{"version":3,"sources":["/Users/lihongshen/Downloads/2022 用面試資料/React-Blog/src/pages/HomePage/HomePage.js"],"names":["React","useState","useEffect","getPosts","styled","Link","useDispatch","useSelector","selectLoader","toggleOpen","toggleOff","Root","div","PostContainer","PostTitle","PostDate","PageSign","Button","span","PageFunction","PostContent","SelfIntroduceBlock","Post","post","months","editTime","Date","createdAt","getMonth","getDate","getFullYear","id","title","body","HomePage","posts","setPosts","totalPage","setTotalPage","page","setPage","itemPerPage","dispatch","handleLoader","then","Math","ceil","headers","get","res","json","handleFirstPage","pageChanged","handleLastPage","handlePreviousPage","handleNextPage","newSet","map"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { getPosts } from \"../../WebAPI\";\nimport styled from \"styled-components\";\nimport { Link } from \"react-router-dom\";\nimport \"./HomePage.scss\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { selectLoader, toggleOpen, toggleOff } from \"../../redux/loaderSlice\";\n\nconst Root = styled.div`\n  text-align: center;\n  text-decoration: none;\n`;\n\nconst PostContainer = styled.div`\n  padding: 16px;\n  display: flex;\n  justify-content: space-between;\n  margin: 10px auto;\n  border-radius: 10px;\n  margin-bottom: 20px;\n  width: 50%;\n`;\n\nconst PostTitle = styled(Link)`\n  font-size: 36px;\n  text-decoration: none;\n  color: black;\n  text-decoration: underline;\n  :hover { text-decoration-color: #f4bf2c; }\n  text-align: left;\n`;\n\nconst PostDate = styled.div`\n  color: rgba(0, 0, 0, 0.5);\n  margin-bottom:50px;\n  text-align: left;\n`;\nconst PageSign = styled.div`\n  @media (max-width: 460px){\n    display: block;\n    margin: 10px 10px;\n  }\n  margin: 20px 20px;\n  display: inline-block;\n  padding: 10px;\n  color:#aaaaaa;\n`;\nconst Button = styled.span`\n  border: 0;\n  background: none;\n  cursor: pointer;\n  padding: 5px;\n  margin: 10px;\n  font-size: 11px;\n  color: #aaaaaa;\n  text-transform: uppercase;\n  letter-spacing: 3px;\n  :hover {\n    color:black;\n  }\n`;\nconst PageFunction = styled.div`\n  margin-top: 50px;\n  @media (max-width: 460px){\n    margin: 10px 10px;\n  }\n`;\n\n// const PostThumbnail = styled.div`\n//   width:60%;\n//   border:2px solid red;\n//   height:80vh;\n// `\n\nconst PostContent = styled.div`\n  margin-top: 20px;\n  height:100px;\n  width:100%;\n  overflow: hidden;\n  white-space: nowrap; \n  text-overflow: ellipsis;\n  word-break: break-all;\n`\n\nfunction SelfIntroduceBlock() {\n  return (\n    <div className=\"simpleIntroduce__container\">\n      <div className=\"simpleIntroduce__textContainer\">\n        <h1 className=\"simpleIntroduce__content\">A personal blog</h1>\n        <h1 className=\"simpleIntroduce__content-major\">Ri\n          <span className=\"simpleIntroduce__content-sub\">ck</span>\n          y's</h1>\n        <h3 className=\"simpleIntroduce__text\">I am a frontend developer Based in Taipei</h3>\n      </div>\n    </div>\n  )\n}\n\n\nfunction Post({ post }) {\n  const months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec']\n  const editTime = new Date(post.createdAt)\n  return (\n    <PostContainer>\n      {/* <PostThumbnail/> */}\n      <div className=\"post__desc\">\n        <PostDate>{months[editTime.getMonth()]}. {editTime.getDate()}, {editTime.getFullYear()}</PostDate>\n        <PostTitle to={`/post/${post.id}`}>{post.title}</PostTitle>\n        <PostContent>{post.body}</PostContent>\n      </div>\n    </PostContainer>\n  );\n}\n\nPost.propTypes = {\n  post: PropTypes.object,\n};\n\nexport default function HomePage() {\n  const [posts, setPosts] = useState([]);\n  const [totalPage, setTotalPage] = useState();\n  const [page, setPage] = useState(1);\n  const itemPerPage = 5;\n  const dispatch = useDispatch()\n  const handleLoader = useSelector(selectLoader)\n\n  useEffect(() => {\n    getPosts(page, itemPerPage).then((post) =>\n      setTotalPage(Math.ceil(post.headers.get(\"X-Total-Count\") / itemPerPage))\n    );\n\n    dispatch(toggleOpen())\n    getPosts(page, itemPerPage)\n      .then((res) => res.json())\n      .then((posts) => {\n        dispatch(toggleOff())\n        setPosts(posts);\n      });\n  }, [page]);\n\n  const handleFirstPage = () => {\n    pageChanged(1, itemPerPage);\n  };\n\n  const handleLastPage = () => {\n    pageChanged(totalPage, itemPerPage);\n  };\n  const handlePreviousPage = () => {\n    if (page !== 1) {\n      pageChanged(page - 1, itemPerPage);\n    }\n  };\n\n  const handleNextPage = () => {\n    if (page !== totalPage) {\n      pageChanged(page + 1, itemPerPage);\n    }\n  };\n\n  function pageChanged(newSet, itemPerPage) {\n    if (handleLoader) {\n      return;\n    }\n    setPage(newSet);\n    dispatch(toggleOpen())\n    getPosts(newSet, itemPerPage)\n      .then((res) => res.json())\n      .then((posts) => {\n        dispatch(toggleOff())\n        setPosts(posts);\n      });\n  }\n\n\n  return (\n    <Root>\n      <SelfIntroduceBlock/>\n      {posts.map((post) => (\n        <Post key={post.id} post={post} />\n      ))}\n      <PageFunction>\n        <Button onClick={handleFirstPage}>First</Button>\n        <Button onClick={handlePreviousPage}>Previous</Button>\n        <PageSign>\n          {page} / {totalPage}\n        </PageSign>\n        <Button onClick={handleNextPage}>Next</Button>\n        <Button onClick={handleLastPage}>Last</Button>\n      </PageFunction>\n    </Root>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}