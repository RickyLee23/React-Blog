{"ast":null,"code":"import _slicedToArray from\"/Users/lihongshen/Downloads/2022 \\u7528\\u9762\\u8A66\\u8CC7\\u6599/React-Blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/lihongshen/Downloads/2022 \\u7528\\u9762\\u8A66\\u8CC7\\u6599/React-Blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function _templateObject5(){var data=_taggedTemplateLiteral([\"\\n  padding: 12px 20px;\\n  margin: 8px 0;\\n  display: inline-block;\\n  border: 1px solid #ccc;\\n  border-radius: 4px;\\n  box-sizing: border-box;\\n  text-align: left;\\n  width:50%;\\n\"]);_templateObject5=function _templateObject5(){return data;};return data;}function _templateObject4(){var data=_taggedTemplateLiteral([\"\\n  margin-bottom: 40px;\\n  text-align: center;\\n  width:100%;\\n\"]);_templateObject4=function _templateObject4(){return data;};return data;}function _templateObject3(){var data=_taggedTemplateLiteral([\"\\n  margin: 0px auto;\\n  letter-spacing: 3px;\\n  text-align: left;\\n  width:50%;\\n  font-size: 16px;\\n\"]);_templateObject3=function _templateObject3(){return data;};return data;}function _templateObject2(){var data=_taggedTemplateLiteral([\"\\n  margin-top: 20vh;\\n  font-size: 20px;\\n  text-align: center;\\n  /* border:2px solid red; */\\n  margin-left: auto;\\n  margin-right: auto;\\n\"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  color: red;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React,{useState,useContext}from\"react\";import{newPost}from\"../../WebAPI\";import{AuthContext}from\"../../contexts\";import styled from\"styled-components\";import{useHistory}from\"react-router-dom\";import ButtonDefault from\"../../share/button/ButtonDefault\";import{useDispatch,useSelector}from\"react-redux\";import{selectLoader,toggleOpen,toggleOff}from\"../../redux/loaderSlice\";var ErrorMessage=styled.div(_templateObject());var NewPostPageWrapper=styled.div(_templateObject2());var Info=styled.div(_templateObject3());var User=styled.div(_templateObject4());var Textarea=styled.textarea(_templateObject5());export default function NewPostPage(){var _useContext=useContext(AuthContext),user=_useContext.user;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),content=_useState4[0],setContent=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),errorMessage=_useState6[0],setErrorMessage=_useState6[1];var history=useHistory();var dispatch=useDispatch();var handleLoader=useSelector(selectLoader);var handleSubmit=function handleSubmit(e){e.preventDefault();setErrorMessage(null);dispatch(toggleOpen());newPost(title,content).then(function(data){if(data.ok===0){setErrorMessage(data.message);}dispatch(toggleOff());history.push(\"/\");});};if(!user){return null;}return/*#__PURE__*/_jsx(NewPostPageWrapper,{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(User,{children:[\"\\u55E8\\uFF0C\",user.username,\"\\uFF0C\\u6709\\u4EC0\\u9EBC\\u8A71\\u8981\\u544A\\u8A34\\u5927\\u5BB6\\u7684\\u55CE\\uFF1F\"]}),/*#__PURE__*/_jsx(Info,{children:\"Title:\"}),/*#__PURE__*/_jsx(Textarea,{cols:\"50\",value:title,onChange:function onChange(e){return setTitle(e.target.value);}}),/*#__PURE__*/_jsx(Info,{children:\"Content:\"}),/*#__PURE__*/_jsx(Textarea,{rows:\"10\",cols:\"50\",value:content,onChange:function onChange(e){return setContent(e.target.value);}}),/*#__PURE__*/_jsx(ButtonDefault,{}),errorMessage&&/*#__PURE__*/_jsx(ErrorMessage,{children:errorMessage})]})});}","map":{"version":3,"sources":["/Users/lihongshen/Downloads/2022 用面試資料/React-Blog/src/pages/NewPostPage/NewPostPage.js"],"names":["React","useState","useContext","newPost","AuthContext","styled","useHistory","ButtonDefault","useDispatch","useSelector","selectLoader","toggleOpen","toggleOff","ErrorMessage","div","NewPostPageWrapper","Info","User","Textarea","textarea","NewPostPage","user","title","setTitle","content","setContent","errorMessage","setErrorMessage","history","dispatch","handleLoader","handleSubmit","e","preventDefault","then","data","ok","message","push","username","target","value"],"mappings":"mpDAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,UAA1B,KAA4C,OAA5C,CACA,OAASC,OAAT,KAAwB,cAAxB,CACA,OAASC,WAAT,KAA4B,gBAA5B,CACA,MAAOC,CAAAA,MAAP,KAAmB,mBAAnB,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,MAAOC,CAAAA,aAAP,KAA0B,kCAA1B,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,YAAT,CAAuBC,UAAvB,CAAmCC,SAAnC,KAAoD,yBAApD,CAGA,GAAMC,CAAAA,YAAY,CAAGR,MAAM,CAACS,GAAV,mBAAlB,CAGA,GAAMC,CAAAA,kBAAkB,CAAGV,MAAM,CAACS,GAAV,oBAAxB,CAQA,GAAME,CAAAA,IAAI,CAAGX,MAAM,CAACS,GAAV,oBAAV,CAOA,GAAMG,CAAAA,IAAI,CAAGZ,MAAM,CAACS,GAAV,oBAAV,CAKA,GAAMI,CAAAA,QAAQ,CAAGb,MAAM,CAACc,QAAV,oBAAd,CAWA,cAAe,SAASC,CAAAA,WAAT,EAAuB,iBACnBlB,UAAU,CAACE,WAAD,CADS,CAC5BiB,IAD4B,aAC5BA,IAD4B,eAEVpB,QAAQ,CAAC,EAAD,CAFE,wCAE7BqB,KAF6B,eAEtBC,QAFsB,8BAGNtB,QAAQ,CAAC,EAAD,CAHF,yCAG7BuB,OAH6B,eAGpBC,UAHoB,8BAIIxB,QAAQ,EAJZ,yCAI7ByB,YAJ6B,eAIfC,eAJe,eAKpC,GAAMC,CAAAA,OAAO,CAAGtB,UAAU,EAA1B,CACA,GAAMuB,CAAAA,QAAQ,CAAGrB,WAAW,EAA5B,CACA,GAAMsB,CAAAA,YAAY,CAAGrB,WAAW,CAACC,YAAD,CAAhC,CAEA,GAAMqB,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,CAAD,CAAO,CAC1BA,CAAC,CAACC,cAAF,GACAN,eAAe,CAAC,IAAD,CAAf,CACAE,QAAQ,CAAClB,UAAU,EAAX,CAAR,CACAR,OAAO,CAACmB,KAAD,CAAQE,OAAR,CAAP,CAAwBU,IAAxB,CAA6B,SAACC,IAAD,CAAU,CACrC,GAAIA,IAAI,CAACC,EAAL,GAAY,CAAhB,CAAmB,CACjBT,eAAe,CAACQ,IAAI,CAACE,OAAN,CAAf,CACD,CACDR,QAAQ,CAACjB,SAAS,EAAV,CAAR,CACAgB,OAAO,CAACU,IAAR,CAAa,GAAb,EACD,CAND,EAOD,CAXD,CAYA,GAAI,CAACjB,IAAL,CAAW,CACT,MAAO,KAAP,CACD,CACD,mBACE,KAAC,kBAAD,wBACE,cAAM,QAAQ,CAAEU,YAAhB,wBACE,MAAC,IAAD,2BAASV,IAAI,CAACkB,QAAd,oFADF,cAEE,KAAC,IAAD,qBAFF,cAGE,KAAC,QAAD,EACE,IAAI,CAAC,IADP,CAEE,KAAK,CAAEjB,KAFT,CAGE,QAAQ,CAAE,kBAACU,CAAD,QAAOT,CAAAA,QAAQ,CAACS,CAAC,CAACQ,MAAF,CAASC,KAAV,CAAf,EAHZ,EAHF,cAQE,KAAC,IAAD,uBARF,cASE,KAAC,QAAD,EACE,IAAI,CAAC,IADP,CAEE,IAAI,CAAC,IAFP,CAGE,KAAK,CAAEjB,OAHT,CAIE,QAAQ,CAAE,kBAACQ,CAAD,QAAOP,CAAAA,UAAU,CAACO,CAAC,CAACQ,MAAF,CAASC,KAAV,CAAjB,EAJZ,EATF,cAeE,KAAC,aAAD,IAfF,CAgBGf,YAAY,eAAI,KAAC,YAAD,WAAeA,YAAf,EAhBnB,GADF,EADF,CAsBD","sourcesContent":["import React, { useState, useContext } from \"react\";\nimport { newPost } from \"../../WebAPI\";\nimport { AuthContext } from \"../../contexts\";\nimport styled from \"styled-components\";\nimport { useHistory } from \"react-router-dom\";\nimport ButtonDefault from \"../../share/button/ButtonDefault\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { selectLoader, toggleOpen, toggleOff } from \"../../redux/loaderSlice\";\n\n\nconst ErrorMessage = styled.div`\n  color: red;\n`;\nconst NewPostPageWrapper = styled.div`\n  margin-top: 20vh;\n  font-size: 20px;\n  text-align: center;\n  /* border:2px solid red; */\n  margin-left: auto;\n  margin-right: auto;\n`;\nconst Info = styled.div`\n  margin: 0px auto;\n  letter-spacing: 3px;\n  text-align: left;\n  width:50%;\n  font-size: 16px;\n`;\nconst User = styled.div`\n  margin-bottom: 40px;\n  text-align: center;\n  width:100%;\n`;\nconst Textarea = styled.textarea`\n  padding: 12px 20px;\n  margin: 8px 0;\n  display: inline-block;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  box-sizing: border-box;\n  text-align: left;\n  width:50%;\n`;\n\nexport default function NewPostPage() {\n  const { user } = useContext(AuthContext);\n  const [title, setTitle] = useState(\"\");\n  const [content, setContent] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState();\n  const history = useHistory();\n  const dispatch = useDispatch()\n  const handleLoader = useSelector(selectLoader)\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    setErrorMessage(null);\n    dispatch(toggleOpen())\n    newPost(title, content).then((data) => {\n      if (data.ok === 0) {\n        setErrorMessage(data.message);\n      }\n      dispatch(toggleOff())\n      history.push(\"/\");\n    });\n  };\n  if (!user) {\n    return null;\n  }\n  return (\n    <NewPostPageWrapper>\n      <form onSubmit={handleSubmit}>\n        <User>嗨，{user.username}，有什麼話要告訴大家的嗎？</User>\n        <Info>Title:</Info>\n        <Textarea\n          cols=\"50\"\n          value={title}\n          onChange={(e) => setTitle(e.target.value)}\n        />\n        <Info>Content:</Info>\n        <Textarea\n          rows=\"10\"\n          cols=\"50\"\n          value={content}\n          onChange={(e) => setContent(e.target.value)}\n        />\n        <ButtonDefault></ButtonDefault>\n        {errorMessage && <ErrorMessage>{errorMessage}</ErrorMessage>}\n      </form>\n    </NewPostPageWrapper>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}