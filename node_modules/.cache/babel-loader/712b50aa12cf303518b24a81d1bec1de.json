{"ast":null,"code":"import _slicedToArray from\"/Users/lihongshen/Downloads/2022 \\u7528\\u9762\\u8A66\\u8CC7\\u6599/React-Blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/lihongshen/Downloads/2022 \\u7528\\u9762\\u8A66\\u8CC7\\u6599/React-Blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function _templateObject6(){var data=_taggedTemplateLiteral([\"\\n  border: 0;\\n  background: none;\\n  cursor: pointer;\\n  border: 1px solid rgba(0, 0, 0, 0.5);\\n  padding: 5px;\\n  margin: 10px;\\n  border-radius: 5px;\\n  outline: none;\\n  :active {\\n    box-shadow: 0 5px #666;\\n    transform: translateY(4px);\\n  }\\n\"]);_templateObject6=function _templateObject6(){return data;};return data;}function _templateObject5(){var data=_taggedTemplateLiteral([\"\\n  width: 50%;\\n  padding: 12px 20px;\\n  margin: 8px 0;\\n  display: inline-block;\\n  border: 1px solid #ccc;\\n  border-radius: 4px;\\n  box-sizing: border-box;\\n\"]);_templateObject5=function _templateObject5(){return data;};return data;}function _templateObject4(){var data=_taggedTemplateLiteral([\"\\n  margin-bottom: 40px;\\n\"]);_templateObject4=function _templateObject4(){return data;};return data;}function _templateObject3(){var data=_taggedTemplateLiteral([\"\\n  margin: 0px auto;\\n\"]);_templateObject3=function _templateObject3(){return data;};return data;}function _templateObject2(){var data=_taggedTemplateLiteral([\"\\n  margin: 100px auto;\\n  font-size: 20px;\\n  text-align: center;\\n\"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  color: red;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React,{useState,useContext}from\"react\";import{newPost}from\"../../WebAPI\";import{AuthContext}from\"../../contexts\";import styled from\"styled-components\";import{useHistory}from\"react-router-dom\";var ErrorMessage=styled.div(_templateObject());var NewPostPageWrapper=styled.div(_templateObject2());var Info=styled.div(_templateObject3());var User=styled.div(_templateObject4());var Textarea=styled.textarea(_templateObject5());var Button=styled.button(_templateObject6());export default function NewPostPage(){var _useContext=useContext(AuthContext),user=_useContext.user;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),content=_useState4[0],setContent=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),errorMessage=_useState6[0],setErrorMessage=_useState6[1];var history=useHistory();var handleSubmit=function handleSubmit(e){e.preventDefault();setErrorMessage(null);newPost(title,content).then(function(data){if(data.ok===0){setErrorMessage(data.message);}history.push(\"/\");});};if(!user){return null;}return/*#__PURE__*/_jsx(NewPostPageWrapper,{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(User,{children:[\"\\u55E8\\uFF0C\",user.username,\"\\uFF0C\\u6709\\u4EC0\\u9EBC\\u8A71\\u8981\\u544A\\u8A34\\u5927\\u5BB6\\u7684\\u55CE\\uFF1F\"]}),/*#__PURE__*/_jsx(Info,{children:\"Title:\"}),/*#__PURE__*/_jsx(Textarea,{cols:\"50\",value:title,onChange:function onChange(e){return setTitle(e.target.value);}}),/*#__PURE__*/_jsx(Info,{children:\"Content:\"}),/*#__PURE__*/_jsx(Textarea,{rows:\"10\",cols:\"50\",value:content,onChange:function onChange(e){return setContent(e.target.value);}}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Button,{children:\"\\u9001\\u51FA\"})}),errorMessage&&/*#__PURE__*/_jsx(ErrorMessage,{children:errorMessage})]})});}","map":{"version":3,"sources":["/Users/lihongshen/Downloads/2022 用面試資料/React-Blog/src/pages/NewPostPage/NewPostPage.js"],"names":["React","useState","useContext","newPost","AuthContext","styled","useHistory","ErrorMessage","div","NewPostPageWrapper","Info","User","Textarea","textarea","Button","button","NewPostPage","user","title","setTitle","content","setContent","errorMessage","setErrorMessage","history","handleSubmit","e","preventDefault","then","data","ok","message","push","username","target","value"],"mappings":"u0DAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,UAA1B,KAA4C,OAA5C,CACA,OAASC,OAAT,KAAwB,cAAxB,CACA,OAASC,WAAT,KAA4B,gBAA5B,CACA,MAAOC,CAAAA,MAAP,KAAmB,mBAAnB,CACA,OAASC,UAAT,KAA2B,kBAA3B,CAEA,GAAMC,CAAAA,YAAY,CAAGF,MAAM,CAACG,GAAV,mBAAlB,CAGA,GAAMC,CAAAA,kBAAkB,CAAGJ,MAAM,CAACG,GAAV,oBAAxB,CAKA,GAAME,CAAAA,IAAI,CAAGL,MAAM,CAACG,GAAV,oBAAV,CAGA,GAAMG,CAAAA,IAAI,CAAGN,MAAM,CAACG,GAAV,oBAAV,CAGA,GAAMI,CAAAA,QAAQ,CAAGP,MAAM,CAACQ,QAAV,oBAAd,CASA,GAAMC,CAAAA,MAAM,CAAGT,MAAM,CAACU,MAAV,oBAAZ,CAeA,cAAe,SAASC,CAAAA,WAAT,EAAuB,iBACnBd,UAAU,CAACE,WAAD,CADS,CAC5Ba,IAD4B,aAC5BA,IAD4B,eAEVhB,QAAQ,CAAC,EAAD,CAFE,wCAE7BiB,KAF6B,eAEtBC,QAFsB,8BAGNlB,QAAQ,CAAC,EAAD,CAHF,yCAG7BmB,OAH6B,eAGpBC,UAHoB,8BAIIpB,QAAQ,EAJZ,yCAI7BqB,YAJ6B,eAIfC,eAJe,eAKpC,GAAMC,CAAAA,OAAO,CAAGlB,UAAU,EAA1B,CAEA,GAAMmB,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,CAAD,CAAO,CAC1BA,CAAC,CAACC,cAAF,GACAJ,eAAe,CAAC,IAAD,CAAf,CACApB,OAAO,CAACe,KAAD,CAAQE,OAAR,CAAP,CAAwBQ,IAAxB,CAA6B,SAACC,IAAD,CAAU,CACrC,GAAIA,IAAI,CAACC,EAAL,GAAY,CAAhB,CAAmB,CACjBP,eAAe,CAACM,IAAI,CAACE,OAAN,CAAf,CACD,CACDP,OAAO,CAACQ,IAAR,CAAa,GAAb,EACD,CALD,EAMD,CATD,CAUA,GAAI,CAACf,IAAL,CAAW,CACT,MAAO,KAAP,CACD,CACD,mBACE,KAAC,kBAAD,wBACE,cAAM,QAAQ,CAAEQ,YAAhB,wBACE,MAAC,IAAD,2BAASR,IAAI,CAACgB,QAAd,oFADF,cAEE,KAAC,IAAD,qBAFF,cAGE,KAAC,QAAD,EACE,IAAI,CAAC,IADP,CAEE,KAAK,CAAEf,KAFT,CAGE,QAAQ,CAAE,kBAACQ,CAAD,QAAOP,CAAAA,QAAQ,CAACO,CAAC,CAACQ,MAAF,CAASC,KAAV,CAAf,EAHZ,EAHF,cAQE,KAAC,IAAD,uBARF,cASE,KAAC,QAAD,EACE,IAAI,CAAC,IADP,CAEE,IAAI,CAAC,IAFP,CAGE,KAAK,CAAEf,OAHT,CAIE,QAAQ,CAAE,kBAACM,CAAD,QAAOL,CAAAA,UAAU,CAACK,CAAC,CAACQ,MAAF,CAASC,KAAV,CAAjB,EAJZ,EATF,cAeE,kCACE,KAAC,MAAD,2BADF,EAfF,CAmBGb,YAAY,eAAI,KAAC,YAAD,WAAeA,YAAf,EAnBnB,GADF,EADF,CAyBD","sourcesContent":["import React, { useState, useContext } from \"react\";\nimport { newPost } from \"../../WebAPI\";\nimport { AuthContext } from \"../../contexts\";\nimport styled from \"styled-components\";\nimport { useHistory } from \"react-router-dom\";\n\nconst ErrorMessage = styled.div`\n  color: red;\n`;\nconst NewPostPageWrapper = styled.div`\n  margin: 100px auto;\n  font-size: 20px;\n  text-align: center;\n`;\nconst Info = styled.div`\n  margin: 0px auto;\n`;\nconst User = styled.div`\n  margin-bottom: 40px;\n`;\nconst Textarea = styled.textarea`\n  width: 50%;\n  padding: 12px 20px;\n  margin: 8px 0;\n  display: inline-block;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  box-sizing: border-box;\n`;\nconst Button = styled.button`\n  border: 0;\n  background: none;\n  cursor: pointer;\n  border: 1px solid rgba(0, 0, 0, 0.5);\n  padding: 5px;\n  margin: 10px;\n  border-radius: 5px;\n  outline: none;\n  :active {\n    box-shadow: 0 5px #666;\n    transform: translateY(4px);\n  }\n`;\n\nexport default function NewPostPage() {\n  const { user } = useContext(AuthContext);\n  const [title, setTitle] = useState(\"\");\n  const [content, setContent] = useState(\"\");\n  const [errorMessage, setErrorMessage] = useState();\n  const history = useHistory();\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    setErrorMessage(null);\n    newPost(title, content).then((data) => {\n      if (data.ok === 0) {\n        setErrorMessage(data.message);\n      }\n      history.push(\"/\");\n    });\n  };\n  if (!user) {\n    return null;\n  }\n  return (\n    <NewPostPageWrapper>\n      <form onSubmit={handleSubmit}>\n        <User>嗨，{user.username}，有什麼話要告訴大家的嗎？</User>\n        <Info>Title:</Info>\n        <Textarea\n          cols=\"50\"\n          value={title}\n          onChange={(e) => setTitle(e.target.value)}\n        />\n        <Info>Content:</Info>\n        <Textarea\n          rows=\"10\"\n          cols=\"50\"\n          value={content}\n          onChange={(e) => setContent(e.target.value)}\n        />\n        <div>\n          <Button>送出</Button>\n        </div>\n\n        {errorMessage && <ErrorMessage>{errorMessage}</ErrorMessage>}\n      </form>\n    </NewPostPageWrapper>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}