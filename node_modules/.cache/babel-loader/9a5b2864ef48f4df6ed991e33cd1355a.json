{"ast":null,"code":"import _slicedToArray from\"/Users/lihongshen/Downloads/2022 \\u7528\\u9762\\u8A66\\u8CC7\\u6599/React-Blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/lihongshen/Downloads/2022 \\u7528\\u9762\\u8A66\\u8CC7\\u6599/React-Blog/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function _templateObject8(){var data=_taggedTemplateLiteral([\"\\n  width:60%;\\n  border:2px solid red;\\n  height:80vh;\\n\"]);_templateObject8=function _templateObject8(){return data;};return data;}function _templateObject7(){var data=_taggedTemplateLiteral([\"\\n  margin-top: 50px;\\n\"]);_templateObject7=function _templateObject7(){return data;};return data;}function _templateObject6(){var data=_taggedTemplateLiteral([\"\\n  border: 0;\\n  background: none;\\n  cursor: pointer;\\n  padding: 5px;\\n  margin: 10px;\\n  font-size: 11px;\\n  color: #aaaaaa;\\n  text-transform: uppercase;\\n  letter-spacing: 3px;\\n  :hover {\\n    color:black;\\n  }\\n\"]);_templateObject6=function _templateObject6(){return data;};return data;}function _templateObject5(){var data=_taggedTemplateLiteral([\"\\n  margin: 20px 20px;\\n  display: inline-block;\\n  padding: 10px;\\n  color:#aaaaaa;\\n\"]);_templateObject5=function _templateObject5(){return data;};return data;}function _templateObject4(){var data=_taggedTemplateLiteral([\"\\n  color: rgba(0, 0, 0, 0.5);\\n  margin-bottom:20px;\\n\"]);_templateObject4=function _templateObject4(){return data;};return data;}function _templateObject3(){var data=_taggedTemplateLiteral([\"\\n  font-size: 36px;\\n  text-decoration: none;\\n  color: black;\\n  text-decoration: underline;\\n  :hover { text-decoration-color: #f4bf2c; }\\n\"]);_templateObject3=function _templateObject3(){return data;};return data;}function _templateObject2(){var data=_taggedTemplateLiteral([\"\\n  padding: 16px;\\n  display: flex;\\n  justify-content: space-between;\\n  margin: 10px auto;\\n  border-radius: 10px;\\n  margin-bottom: 20px;\\n\"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  text-align: center;\\n  text-decoration: none;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React,{useState,useEffect}from\"react\";import{getPosts}from\"../../WebAPI\";import styled from\"styled-components\";import{Link}from\"react-router-dom\";import\"./HomePage.scss\";import Loader from'../../components/Loader/Loader';var Root=styled.div(_templateObject());var PostContainer=styled.div(_templateObject2());var PostTitle=styled(Link)(_templateObject3());var PostDate=styled.div(_templateObject4());var PageSign=styled.div(_templateObject5());var Button=styled.span(_templateObject6());var PageFunction=styled.div(_templateObject7());var PostThumbnail=styled.div(_templateObject8());function SelfIntroduceBlock(){return/*#__PURE__*/_jsx(\"div\",{className:\"simpleIntroduce__container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"simpleIntroduce__textContainer\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"simpleIntroduce__content\",children:\"A personal blog\"}),/*#__PURE__*/_jsxs(\"h1\",{className:\"simpleIntroduce__content-major\",children:[\"Ri\",/*#__PURE__*/_jsx(\"span\",{className:\"simpleIntroduce__content-sub\",children:\"ck\"}),\"y's\"]}),/*#__PURE__*/_jsxs(\"h3\",{className:\"simpleIntroduce__text\",children:[\"I am a frontend developer \",/*#__PURE__*/_jsx(\"br\",{}),\" Based in Taipei\"]})]})});}function Post(_ref){var post=_ref.post;var months=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];var editTime=new Date(post.createdAt);return/*#__PURE__*/_jsx(PostContainer,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"post__desc\",children:[/*#__PURE__*/_jsxs(PostDate,{children:[months[editTime.getMonth()],\". \",editTime.getDate(),\", \",editTime.getFullYear()]}),/*#__PURE__*/_jsx(PostTitle,{to:\"/post/\".concat(post.id),children:post.title})]})});}export default function HomePage(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),totalPage=_useState4[0],setTotalPage=_useState4[1];var _useState5=useState(1),_useState6=_slicedToArray(_useState5,2),page=_useState6[0],setPage=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isLoading=_useState8[0],setIsLoading=_useState8[1];var itemPerPage=5;useEffect(function(){getPosts(page,itemPerPage).then(function(post){return setTotalPage(Math.ceil(post.headers.get(\"X-Total-Count\")/itemPerPage));});setIsLoading(true);getPosts(page,itemPerPage).then(function(res){return res.json();}).then(function(posts){setIsLoading(false);setPosts(posts);});},[page]);var handleFirstPage=function handleFirstPage(){pageChanged(1,itemPerPage);};var handleLastPage=function handleLastPage(){pageChanged(totalPage,itemPerPage);};var handlePreviousPage=function handlePreviousPage(){if(page!==1){pageChanged(page-1,itemPerPage);}};var handleNextPage=function handleNextPage(){if(page!==totalPage){pageChanged(page+1,itemPerPage);}};function pageChanged(newSet,itemPerPage){if(isLoading){return;}setPage(newSet);setIsLoading(true);getPosts(newSet,itemPerPage).then(function(res){return res.json();}).then(function(posts){setIsLoading(false);setPosts(posts);});}return/*#__PURE__*/_jsxs(Root,{children:[isLoading&&/*#__PURE__*/_jsx(Loader,{}),/*#__PURE__*/_jsx(SelfIntroduceBlock,{}),posts.map(function(post){return/*#__PURE__*/_jsx(Post,{post:post},post.id);}),/*#__PURE__*/_jsxs(PageFunction,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleFirstPage,children:\"First\"}),/*#__PURE__*/_jsx(Button,{onClick:handlePreviousPage,children:\"Previous\"}),/*#__PURE__*/_jsxs(PageSign,{children:[page,\" / \",totalPage]}),/*#__PURE__*/_jsx(Button,{onClick:handleNextPage,children:\"Next\"}),/*#__PURE__*/_jsx(Button,{onClick:handleLastPage,children:\"Last\"})]})]});}","map":{"version":3,"sources":["/Users/lihongshen/Downloads/2022 用面試資料/React-Blog/src/pages/HomePage/HomePage.js"],"names":["React","useState","useEffect","getPosts","styled","Link","Loader","Root","div","PostContainer","PostTitle","PostDate","PageSign","Button","span","PageFunction","PostThumbnail","SelfIntroduceBlock","Post","post","months","editTime","Date","createdAt","getMonth","getDate","getFullYear","id","title","HomePage","posts","setPosts","totalPage","setTotalPage","page","setPage","isLoading","setIsLoading","itemPerPage","then","Math","ceil","headers","get","res","json","handleFirstPage","pageChanged","handleLastPage","handlePreviousPage","handleNextPage","newSet","map"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { getPosts } from \"../../WebAPI\";\nimport styled from \"styled-components\";\nimport { Link } from \"react-router-dom\";\nimport \"./HomePage.scss\";\nimport Loader from '../../components/Loader/Loader'\n\nconst Root = styled.div`\n  text-align: center;\n  text-decoration: none;\n`;\n\nconst PostContainer = styled.div`\n  padding: 16px;\n  display: flex;\n  justify-content: space-between;\n  margin: 10px auto;\n  border-radius: 10px;\n  margin-bottom: 20px;\n`;\n\nconst PostTitle = styled(Link)`\n  font-size: 36px;\n  text-decoration: none;\n  color: black;\n  text-decoration: underline;\n  :hover { text-decoration-color: #f4bf2c; }\n`;\n\nconst PostDate = styled.div`\n  color: rgba(0, 0, 0, 0.5);\n  margin-bottom:20px;\n`;\nconst PageSign = styled.div`\n  margin: 20px 20px;\n  display: inline-block;\n  padding: 10px;\n  color:#aaaaaa;\n`;\nconst Button = styled.span`\n  border: 0;\n  background: none;\n  cursor: pointer;\n  padding: 5px;\n  margin: 10px;\n  font-size: 11px;\n  color: #aaaaaa;\n  text-transform: uppercase;\n  letter-spacing: 3px;\n  :hover {\n    color:black;\n  }\n`;\nconst PageFunction = styled.div`\n  margin-top: 50px;\n`;\n\nconst PostThumbnail = styled.div`\n  width:60%;\n  border:2px solid red;\n  height:80vh;\n`\n\nfunction SelfIntroduceBlock() {\n  return (\n    <div className=\"simpleIntroduce__container\">\n      <div className=\"simpleIntroduce__textContainer\">\n        <h1 className=\"simpleIntroduce__content\">A personal blog</h1>\n        <h1 className=\"simpleIntroduce__content-major\">Ri\n          <span className=\"simpleIntroduce__content-sub\">ck</span>\n          y's</h1>\n        <h3 className=\"simpleIntroduce__text\">I am a frontend developer <br/> Based in Taipei</h3>\n      </div>\n    </div>\n  )\n}\n\n\nfunction Post({ post }) {\n  const months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec']\n  const editTime = new Date(post.createdAt)\n  return (\n    <PostContainer>\n      {/* <PostThumbnail/> */}\n      <div className=\"post__desc\">\n        <PostDate>{months[editTime.getMonth()]}. {editTime.getDate()}, {editTime.getFullYear()}</PostDate>\n        <PostTitle to={`/post/${post.id}`}>{post.title}</PostTitle>\n      </div>\n    </PostContainer>\n  );\n}\n\nPost.propTypes = {\n  post: PropTypes.object,\n};\n\nexport default function HomePage() {\n  const [posts, setPosts] = useState([]);\n  const [totalPage, setTotalPage] = useState();\n  const [page, setPage] = useState(1);\n  const [isLoading, setIsLoading] = useState(false);\n  const itemPerPage = 5;\n\n  useEffect(() => {\n    getPosts(page, itemPerPage).then((post) =>\n      setTotalPage(Math.ceil(post.headers.get(\"X-Total-Count\") / itemPerPage))\n    );\n\n    setIsLoading(true);\n    getPosts(page, itemPerPage)\n      .then((res) => res.json())\n      .then((posts) => {\n        setIsLoading(false);\n        setPosts(posts);\n      });\n  }, [page]);\n\n  const handleFirstPage = () => {\n    pageChanged(1, itemPerPage);\n  };\n\n  const handleLastPage = () => {\n    pageChanged(totalPage, itemPerPage);\n  };\n  const handlePreviousPage = () => {\n    if (page !== 1) {\n      pageChanged(page - 1, itemPerPage);\n    }\n  };\n\n  const handleNextPage = () => {\n    if (page !== totalPage) {\n      pageChanged(page + 1, itemPerPage);\n    }\n  };\n\n  function pageChanged(newSet, itemPerPage) {\n    if (isLoading) {\n      return;\n    }\n    setPage(newSet);\n    setIsLoading(true);\n    getPosts(newSet, itemPerPage)\n      .then((res) => res.json())\n      .then((posts) => {\n        setIsLoading(false);\n        setPosts(posts);\n      });\n  }\n\n\n  return (\n    <Root>\n      {isLoading && <Loader/>}\n      <SelfIntroduceBlock/>\n      {posts.map((post) => (\n        <Post key={post.id} post={post} />\n      ))}\n      <PageFunction>\n        <Button onClick={handleFirstPage}>First</Button>\n        <Button onClick={handlePreviousPage}>Previous</Button>\n        <PageSign>\n          {page} / {totalPage}\n        </PageSign>\n        <Button onClick={handleNextPage}>Next</Button>\n        <Button onClick={handleLastPage}>Last</Button>\n      </PageFunction>\n    </Root>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}